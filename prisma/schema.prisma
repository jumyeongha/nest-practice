generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model UserEntity {
  id       Int    @id @default(autoincrement())
  email    String @db.VarChar(255)
  password String @db.VarChar(255)
  name     String @db.VarChar(255)

  @@map("user")
}

model StarEntity {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(32)

  candidateEntities CandidateEntity[]

  @@map("star")
}

model VoteEntity {
  id        Int      @id @default(autoincrement())
  title     String   @map("title") @db.VarChar(64)
  status    String   @map("status") @db.VarChar(16)
  startedAt DateTime @map("started_at")
  endedAt   DateTime @map("ended_at")

  @@map("vote")
}

model CandidateEntity {
  id        Int      @id @default(autoincrement())
  voteId    Int      @map("vote_id")
  starId    Int      @map("star_id")
  voteCount Int      @map("vote_count")

  starEntity StarEntity @relation(fields: [starId], references: [id])

  @@map("candidate")
}

model VotingLogEntity {
  id          Int      @id @default(autoincrement())
  voteId      Int      @map("vote_id")
  candidateId Int      @map("candidate_id")
  userId      Int      @map("user_id")
  votedAt     DateTime @map("voted_at")

  @@map("voting_log")
}
